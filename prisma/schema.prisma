generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url = env("POSTGRES_PRISMA_URL") // uses connection pooling
  directUrl = env("POSTGRES_URL_NON_POOLING") // uses a direct connection
}

model User {
  id Int @id @default(autoincrement())
  name String
  email String @unique
  password String
  inputs ContentInput[]
  teams UsersTeams[]


  @@map("user")
}

model ContentInput {
  id Int @id @default(autoincrement())
  user User @relation(fields: [userId], references: [id]) //relacion con la tabla de a uno
  userId Int  @map("user_id")
  content String
  networkType String @map("network_type")
  targetAge Int @map("target_age")
  results Result[]

  @@map("content_input")
}

model Result {
  id Int @id @default(autoincrement())
  input ContentInput @relation(fields: [inputId], references: [id])
  inputId Int @map("input_id")
  result String
  date DateTime @default(now())

  @@map("result")
}

model Team {
  id Int @id @default(autoincrement())
  name String
  description String
  users UsersTeams[]
}


model UsersTeams {
  user User @relation(fields: [userId], references: [id])
  userId Int
  team Team @relation(fields: [teamId], references: [id])
  teamId Int

  @@id([userId, teamId])
  @@map("users_teams")
}

